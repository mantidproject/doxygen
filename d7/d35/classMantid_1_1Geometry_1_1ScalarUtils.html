<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mantid: Mantid::Geometry::ScalarUtils Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-59110517-2', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Mantid
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/d8e/namespaceMantid.html">Mantid</a></li><li class="navelem"><a class="el" href="../../dc/d67/namespaceMantid_1_1Geometry.html">Geometry</a></li><li class="navelem"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html">ScalarUtils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="../../d6/dbb/classMantid_1_1Geometry_1_1ScalarUtils-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Mantid::Geometry::ScalarUtils Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class contains static utility methods for determining an orientation matrix corresponding to a conventional, given the orientation matrix corresponding to the Niggli reduced cell.  
 <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../db/dc2/ScalarUtils_8h_source.html">ScalarUtils.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa09ddab82f4f54a8049971f2cbe5b318"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#aa09ddab82f4f54a8049971f2cbe5b318">GetCellBestError</a> (const std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; &amp;list, bool use_triclinic)</td></tr>
<tr class="memdesc:aa09ddab82f4f54a8049971f2cbe5b318"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the cell from the list with the smallest error, possibly excluding triclinic cells.  <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#aa09ddab82f4f54a8049971f2cbe5b318">More...</a><br /></td></tr>
<tr class="separator:aa09ddab82f4f54a8049971f2cbe5b318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e34020e4fbdc4f26585f00490ed588"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#ad5e34020e4fbdc4f26585f00490ed588">GetCellForForm</a> (const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;UB, size_t form_num, bool allowPermutations=false)</td></tr>
<tr class="memdesc:ad5e34020e4fbdc4f26585f00490ed588"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the best conventional cell for the form number, using the specified UB, and three related "almost Niggli" cells obtained by reflecting pairs of sides a, b, c.  <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#ad5e34020e4fbdc4f26585f00490ed588">More...</a><br /></td></tr>
<tr class="separator:ad5e34020e4fbdc4f26585f00490ed588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58da21ab727d2c924df2176375d90bc0"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a58da21ab727d2c924df2176375d90bc0">GetCells</a> (const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;UB, bool best_only, bool allowPermutations=false)</td></tr>
<tr class="memdesc:a58da21ab727d2c924df2176375d90bc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of all possible conventional cells for UB, regardless of errors, using this UB, and three related "almost Niggli" cells obtained by reflecting pairs of sides a, b, c.  <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a58da21ab727d2c924df2176375d90bc0">More...</a><br /></td></tr>
<tr class="separator:a58da21ab727d2c924df2176375d90bc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8927d919b4e99d17e60045defcca5ae9"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a8927d919b4e99d17e60045defcca5ae9">GetCells</a> (const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;UB, const std::string &amp;cell_type, const std::string &amp;centering, bool allowPermutations=false)</td></tr>
<tr class="memdesc:a8927d919b4e99d17e60045defcca5ae9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of conventional cells for UB with specified type and centering, using this UB, and three related "almost Niggli" cells obtained by reflecting pairs of sides a, b, c.  <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a8927d919b4e99d17e60045defcca5ae9">More...</a><br /></td></tr>
<tr class="separator:a8927d919b4e99d17e60045defcca5ae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac06abbafd0adfcb9f00a13785e487300"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#ac06abbafd0adfcb9f00a13785e487300">GetCellsUBOnly</a> (const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;UB, const std::string &amp;cell_type, const std::string &amp;centering, bool allowPermutations=false)</td></tr>
<tr class="memdesc:ac06abbafd0adfcb9f00a13785e487300"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of conventional cells for UB with specified type and centering, using ONLY this UB, not related reflected cells.  <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#ac06abbafd0adfcb9f00a13785e487300">More...</a><br /></td></tr>
<tr class="separator:ac06abbafd0adfcb9f00a13785e487300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7018107dda37ce463cffbbef82cd04a6"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a7018107dda37ce463cffbbef82cd04a6">GetRelatedUBs</a> (const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;UB, double factor, double angle_tolerance)</td></tr>
<tr class="memdesc:a7018107dda37ce463cffbbef82cd04a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of related cells obtained by reflecting pairs of sides with nearly a 90 degree angle between the sides, and permuting sides.  <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a7018107dda37ce463cffbbef82cd04a6">More...</a><br /></td></tr>
<tr class="separator:a7018107dda37ce463cffbbef82cd04a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78206743e619d7d90775722494ed12e2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a78206743e619d7d90775722494ed12e2">RemoveHighErrorForms</a> (std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; &amp;list, double level)</td></tr>
<tr class="memdesc:a78206743e619d7d90775722494ed12e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove cells from list that have scalar errors above the specified level.  <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a78206743e619d7d90775722494ed12e2">More...</a><br /></td></tr>
<tr class="separator:a78206743e619d7d90775722494ed12e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a4037ecbf96ac4ae67ad668850e8d3050"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a4037ecbf96ac4ae67ad668850e8d3050">AddIfBest</a> (std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; &amp;list, <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &amp;info)</td></tr>
<tr class="memdesc:a4037ecbf96ac4ae67ad668850e8d3050"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add conventional cell to list if it has the least error for its form num.  <a href="../../d7/d35/classMantid_1_1Geometry_1_1ScalarUtils.html#a4037ecbf96ac4ae67ad668850e8d3050">More...</a><br /></td></tr>
<tr class="separator:a4037ecbf96ac4ae67ad668850e8d3050"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class contains static utility methods for determining an orientation matrix corresponding to a conventional, given the orientation matrix corresponding to the Niggli reduced cell. </p>
<dl class="section author"><dt>Author</dt><dd>Dennis Mikkelson </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2012-01-12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/dc2/ScalarUtils_8h_source.html#l00032">32</a> of file <a class="el" href="../../db/dc2/ScalarUtils_8h_source.html">ScalarUtils.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a4037ecbf96ac4ae67ad668850e8d3050" name="a4037ecbf96ac4ae67ad668850e8d3050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4037ecbf96ac4ae67ad668850e8d3050">&#9670;&#160;</a></span>AddIfBest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ScalarUtils::AddIfBest </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add conventional cell to list if it has the least error for its form num. </p>
<p >Add the conventional cell record to the list if there is not already an entry with the same form number, or replace the entry that has the same form number with the specified cell info, if the specified cell info has a smaller error.</p>
<p >NOTE: The list must initially contain at most one entry with the same form number as the specified ConventionalCellInfo object. That list property will be maintained by this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>The initial list of <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html" title="Instances of this class represent information about a selected conventional cell based on a specified...">ConventionalCell</a> objects. </td></tr>
    <tr><td class="paramname">info</td><td>The new <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html" title="Instances of this class represent information about a selected conventional cell based on a specified...">ConventionalCell</a> object that might be added to the list. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00418">418</a> of file <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d16/ConventionalCell_8cpp_source.html#l00056">Mantid::Geometry::ConventionalCell::GetError()</a>, and <a class="el" href="../../d6/d16/ConventionalCell_8cpp_source.html#l00048">Mantid::Geometry::ConventionalCell::GetFormNum()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00091">GetCells()</a>.</p>

</div>
</div>
<a id="aa09ddab82f4f54a8049971f2cbe5b318" name="aa09ddab82f4f54a8049971f2cbe5b318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa09ddab82f4f54a8049971f2cbe5b318">&#9670;&#160;</a></span>GetCellBestError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> ScalarUtils::GetCellBestError </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_triclinic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the cell from the list with the smallest error, possibly excluding triclinic cells. </p>
<p >Get the cell info object that has the smallest error of any of the cells in the list.</p>
<p >If use_triclinc is false, this will skip triclinic cells in the list, and return the non-triclinic cell with the smallest error of all non-triclinic cells. If there is no such cell, or if the list is empty, this will throw an exception.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>The list of conventional cell info objects. </td></tr>
    <tr><td class="paramname">use_triclinic</td><td>If false, skip any triclinic cells in the list when checking for smallest error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The entry in the list with the smallest error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00280">280</a> of file <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd8/IndexPeaks_8cpp_source.html#l00133">error</a>, <a class="el" href="../../d6/d16/ConventionalCell_8cpp_source.html#l00063">Mantid::Geometry::ConventionalCell::GetCellType()</a>, and <a class="el" href="../../d3/db7/ReducedCell_8h_source.html#l00058">Mantid::Geometry::ReducedCell::TRICLINIC()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d09/SelectCellOfType_8cpp_source.html#l00073">Mantid::Crystal::SelectCellOfType::exec()</a>, and <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00091">GetCells()</a>.</p>

</div>
</div>
<a id="ad5e34020e4fbdc4f26585f00490ed588" name="ad5e34020e4fbdc4f26585f00490ed588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5e34020e4fbdc4f26585f00490ed588">&#9670;&#160;</a></span>GetCellForForm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> ScalarUtils::GetCellForForm </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>UB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>form_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowPermutations</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the best conventional cell for the form number, using the specified UB, and three related "almost Niggli" cells obtained by reflecting pairs of sides a, b, c. </p>
<p >Get one cell, the for specified UB and form, by trying different reflections of a,b,c and forming the ConventionalCellInfo object corresponding to the smallest form error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">UB</td><td>Crystal::Orientation transformation corresponding to a Niggli reduced cell. </td></tr>
    <tr><td class="paramname">form_num</td><td>The form number to use. </td></tr>
    <tr><td class="paramname">allowPermutations</td><td>Allow permutations of conventional cells for related UBs with better fit to peaks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ConventionalCellInfo object corresponding to the specified form number and UB (or a related matrix) with the smallest error of any related matrix. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00217">217</a> of file <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../dc/dd8/IndexPeaks_8cpp_source.html#l00133">error</a>, <a class="el" href="../../de/d8c/IndexingUtils_8cpp_source.html#l02780">Mantid::Geometry::IndexingUtils::GetLatticeParameters()</a>, <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00339">GetRelatedUBs()</a>, and <a class="el" href="../../d1/d20/ReducedCell_8cpp_source.html#l00631">Mantid::Geometry::ReducedCell::WeightedDistance()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d7c/SelectCellWithForm_8cpp_source.html#l00156">Mantid::Crystal::SelectCellWithForm::exec()</a>.</p>

</div>
</div>
<a id="a58da21ab727d2c924df2176375d90bc0" name="a58da21ab727d2c924df2176375d90bc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58da21ab727d2c924df2176375d90bc0">&#9670;&#160;</a></span>GetCells() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; ScalarUtils::GetCells </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>UB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>best_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowPermutations</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get list of all possible conventional cells for UB, regardless of errors, using this UB, and three related "almost Niggli" cells obtained by reflecting pairs of sides a, b, c. </p>
<p >Get a list of cell info objects, corresponding to all forms that match the specified UB, or related UBs, with pairs of edges reflected.</p>
<p >If the same form number matches several times when different pairs of edges are reflected, only the one with the smallest error value will be included. A pair of edges will be reflected if the angle between the edges is within 2 degrees of 90 degrees. This is needed to take care of the case where a positive Niggli cell was found, but due to errors in the data, a negative Niggli cell should have been found, and visa-versa.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">UB</td><td>The lattice parameters for this UB matrix and matrices related to it by reflecting pairs of sides, are used to form the list of possible conventional cells. </td></tr>
    <tr><td class="paramname">best_only</td><td>If true, only include the best form for each Bravais lattice. </td></tr>
    <tr><td class="paramname">allowPermutations</td><td>Allow permutations of conventional cells for related UBs with better fit to peaks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector of conventional cell info objects, corresponding to the best matching forms for UB and cells related to UB by reflections of pairs of cell edges. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00091">91</a> of file <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00418">AddIfBest()</a>, <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00045">BRAVAIS_CENTERING</a>, <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00021">BRAVAIS_TYPE</a>, <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00280">GetCellBestError()</a>, and <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00091">GetCells()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d09/SelectCellOfType_8cpp_source.html#l00073">Mantid::Crystal::SelectCellOfType::exec()</a>, <a class="el" href="../../db/d13/ShowPossibleCells_8cpp_source.html#l00049">Mantid::Crystal::ShowPossibleCells::exec()</a>, and <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00091">GetCells()</a>.</p>

</div>
</div>
<a id="a8927d919b4e99d17e60045defcca5ae9" name="a8927d919b4e99d17e60045defcca5ae9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8927d919b4e99d17e60045defcca5ae9">&#9670;&#160;</a></span>GetCells() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; ScalarUtils::GetCells </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>UB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cell_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>centering</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowPermutations</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get list of conventional cells for UB with specified type and centering, using this UB, and three related "almost Niggli" cells obtained by reflecting pairs of sides a, b, c. </p>
<p >Get a list of cell info objects, corresponding to all forms that match the specified UB, or related UBs, with pairs of edges reflected, and have the specified cell type and centering.</p>
<p >If the same form number matches several times when different pairs of edges are reflected, only the one with the smallest error value will be included. A pair of edges will be reflected if the angle between the edges is within 2 degrees of 90 degrees. This is needed to take care of the case where a positive Niggli cell was found, but due to errors in the data, a negative Niggli cell should have been found, and visa-versa.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">UB</td><td>The lattice parameters for this UB matrix and matrices related to it by reflecting pairs of sides, are used to form the list of possible conventional cells. </td></tr>
    <tr><td class="paramname">cell_type</td><td>String specifying the cell type, as listed in the <a class="el" href="../../df/df2/classMantid_1_1Geometry_1_1ReducedCell.html" title="Instances of this class represent information about reduced cell types including the transformation r...">ReducedCell</a> class. </td></tr>
    <tr><td class="paramname">centering</td><td>String specifying the centering, as listed in the <a class="el" href="../../df/df2/classMantid_1_1Geometry_1_1ReducedCell.html" title="Instances of this class represent information about reduced cell types including the transformation r...">ReducedCell</a> class. </td></tr>
    <tr><td class="paramname">allowPermutations</td><td>Allow permutations of conventional cells for related UBs with better fit to peaks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector of conventional cell objects, for the specified cell type and centering, corresponding to the best matching forms for UB and cells related to UB by reflections of pairs of cell edges. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00135">135</a> of file <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00418">AddIfBest()</a>, <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00182">GetCellsUBOnly()</a>, and <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00339">GetRelatedUBs()</a>.</p>

</div>
</div>
<a id="ac06abbafd0adfcb9f00a13785e487300" name="ac06abbafd0adfcb9f00a13785e487300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac06abbafd0adfcb9f00a13785e487300">&#9670;&#160;</a></span>GetCellsUBOnly()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; ScalarUtils::GetCellsUBOnly </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>UB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cell_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>centering</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowPermutations</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get list of conventional cells for UB with specified type and centering, using ONLY this UB, not related reflected cells. </p>
<p >Get a list of cell info objects that correspond to the specific given UB matrix.</p>
<p >The list will have at most one instance of any matching form since only the specified UB matrix is used (no reflections or other related cell modifications). For any form with the specified cell type and centering, a cell info object will be added to the list, regardless of the error in cell scalars. As a result, the list returned by this method will often have forms that don't fit well. However, the list will be a complete list of matching forms for the specified UB, cell_type and centering. Poorly matching entries can be removed subsequently by the calling code, if need be.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">UB</td><td>The lattice parameters for this UB matrix are used to form the list of possible conventional cells. </td></tr>
    <tr><td class="paramname">cell_type</td><td>String specifying the cell type, as listed in the <a class="el" href="../../df/df2/classMantid_1_1Geometry_1_1ReducedCell.html" title="Instances of this class represent information about reduced cell types including the transformation r...">ReducedCell</a> class. </td></tr>
    <tr><td class="paramname">centering</td><td>String specifying the centering, as listed in the <a class="el" href="../../df/df2/classMantid_1_1Geometry_1_1ReducedCell.html" title="Instances of this class represent information about reduced cell types including the transformation r...">ReducedCell</a> class. </td></tr>
    <tr><td class="paramname">allowPermutations</td><td>Allow permutations of conventional cells for related UBs with better fit to peaks. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a list of conventional cells for the specified UB, of the specified type and centering. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00182">182</a> of file <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d20/ReducedCell_8cpp_source.html#l00610">Mantid::Geometry::ReducedCell::GetCellType()</a>, <a class="el" href="../../d1/d20/ReducedCell_8cpp_source.html#l00617">Mantid::Geometry::ReducedCell::GetCentering()</a>, <a class="el" href="../../de/d8c/IndexingUtils_8cpp_source.html#l02780">Mantid::Geometry::IndexingUtils::GetLatticeParameters()</a>, and <a class="el" href="../../d3/db7/ReducedCell_8h_source.html#l00048">Mantid::Geometry::ReducedCell::NUM_CELL_TYPES</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00135">GetCells()</a>.</p>

</div>
</div>
<a id="a7018107dda37ce463cffbbef82cd04a6" name="a7018107dda37ce463cffbbef82cd04a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7018107dda37ce463cffbbef82cd04a6">&#9670;&#160;</a></span>GetRelatedUBs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">DblMatrix</a> &gt; ScalarUtils::GetRelatedUBs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/dec/namespaceMantid_1_1Kernel.html#af7aba0cb1e2af14b7d5018cc3c22771d">Kernel::DblMatrix</a> &amp;&#160;</td>
          <td class="paramname"><em>UB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>angle_tolerance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get list of related cells obtained by reflecting pairs of sides with nearly a 90 degree angle between the sides, and permuting sides. </p>
<p >Get a list of UB matrices that are related to the specified UB.</p>
<p >The related UBs are generated by both reflecting pairs of of the unit cell edge vectors a,b,c and permuting the resulting edge vectors in ways that preserve the handedness of the cell. For example replacing a,b,c with b,c,a would preserve the handedness, but replacing a,b,c with a,c,b would not. In this case we would also need to negate side a, so we would replace a,b,c with -a,c,b. A permutation of the sides is only used provided the sides are still "essentially" in increasing order. The specified factor provides a tolerance to relax the restriction that |a|&lt;=|b|&lt;=|c|. As long as a side is less than or equal to the following side times the specified factor, it is considered less than or equal to the following side, for purposes of checking whether or not the list of sides could form a Niggli cell. This provides a tolerance for experimental error. Two sides will be reflected across the origin if the angle between them is within the specified angle_tolerance of 90 degrees. This will help find the correct Niggli cell for cases where the angle is near 90 degrees. In particular, if a positive Niggli cell was found with an angle near 90 degrees, due to errors in the data, it possibly should have been a negative Niggli cell. Adding the cases with reflected sides for angles near 90 degrees will include the opposite sign Niggli cell so it is also checked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">UB</td><td>The original matrix (should be for Niggli cell) </td></tr>
    <tr><td class="paramname">factor</td><td>Tolerance for error in real-space cell edge lengths. </td></tr>
    <tr><td class="paramname">angle_tolerance</td><td>Tolerance for angles near 90 degree.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector of UB matrices related to the original UB matrix by reflections of pairs of the side vectors a, b, c. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00339">339</a> of file <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d3f/Kernel_2src_2V3D_8cpp_source.html#l00165">Mantid::Kernel::V3D::angle()</a>, <a class="el" href="../../dd/d52/Matrix_8cpp_source.html#l00022">fabs</a>, <a class="el" href="../../db/d31/Geometry_2src_2Crystal_2OrientedLattice_8cpp_source.html#l00318">Mantid::Geometry::OrientedLattice::GetABC()</a>, <a class="el" href="../../db/d31/Geometry_2src_2Crystal_2OrientedLattice_8cpp_source.html#l00285">Mantid::Geometry::OrientedLattice::GetUB()</a>, and <a class="el" href="../../dd/dcf/V3D_8h_source.html#l00263">Mantid::Kernel::V3D::norm()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00217">GetCellForForm()</a>, and <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00135">GetCells()</a>.</p>

</div>
</div>
<a id="a78206743e619d7d90775722494ed12e2" name="a78206743e619d7d90775722494ed12e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78206743e619d7d90775722494ed12e2">&#9670;&#160;</a></span>RemoveHighErrorForms()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ScalarUtils::RemoveHighErrorForms </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d1/d83/classMantid_1_1Geometry_1_1ConventionalCell.html">ConventionalCell</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove cells from list that have scalar errors above the specified level. </p>
<p >Remove any forms from the list that have errors that are above the specified level.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>The list of conventional cell objects to be cleaned up. </td></tr>
    <tr><td class="paramname">level</td><td>This specifies the maximum error for cells that will not be discarded from the list. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html#l00259">259</a> of file <a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d13/ShowPossibleCells_8cpp_source.html#l00049">Mantid::Crystal::ShowPossibleCells::exec()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Framework/Geometry/inc/MantidGeometry/Crystal/<a class="el" href="../../db/dc2/ScalarUtils_8h_source.html">ScalarUtils.h</a></li>
<li>Framework/Geometry/src/Crystal/<a class="el" href="../../d5/d40/ScalarUtils_8cpp_source.html">ScalarUtils.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 3 2023 12:00:21 for Mantid by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
